webpackJsonp([0],{124:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.config={mapOptions:{center:{latitude:45,longitude:-73},bounds:{},zoom:8,control:{},events:{}},cluserOptions:{gridSize:20,maxZoom:15,styles:[{height:75,url:"images/ICO/ico_liv_v_m.svg",width:75}]},cluserPreOptions:{gridSize:20,maxZoom:15,styles:[{height:75,url:"images/ICO/ico_pre_grp.svg",width:75}]},clusterOptionsOther:{gridSize:20,maxZoom:15,styles:[{height:75,url:"images/ICO/ico_truck_other.svg",width:75}]},chauffColor:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#009688","#00bcd4","#ffc107","#ff9800","#ff5722","#795548","#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#009688","#00bcd4","#ffc107","#ff9800","#ff5722","#795548","#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#009688","#00bcd4","#ffc107","#ff9800","#ff5722","#795548","#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#009688","#00bcd4","#ffc107","#ff9800","#ff5722","#795548","#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#009688","#00bcd4","#ffc107","#ff9800","#ff5722","#795548","#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#009688","#00bcd4","#ffc107","#ff9800","#ff5722","#795548"]}},126:function(e,t){"use strict";angular.module("ngAudio",[]).directive("ngAudio",["$compile","$q","ngAudio",function(e,t,n){return{restrict:"AEC",scope:{volume:"=",start:"=",currentTime:"=",loop:"=",clickPlay:"=",disablePreload:"="},controller:["$scope","$attrs","$element","$timeout",function(e,t,o,a){function i(){s=n.load(t.ngAudio,e),e.$audio=s,s.unbind()}var s;e.disablePreload||i(),o.on("click",function(){e.clickPlay!==!1&&(e.disablePreload&&i(),s.audio.play(),s.volume=e.volume||s.volume,s.loop=e.loop,s.currentTime=e.start||0,a(function(){s.play()},5))}),o.on("$destroy",function(){s.destroy()})}]}}]).directive("ngAudioHover",["$compile","$q","ngAudio",function(e,t,n){return{restrict:"AEC",controller:["$scope","$attrs","$element","$timeout",function(e,t,o,a){var i=n.load(t.ngAudioHover,e);o.on("mouseover rollover hover",function(){i.audio.play(),i.volume=t.volumeHover||i.volume,i.loop=t.loop,i.currentTime=t.startHover||0}),o.on("$destroy",function(){i.destroy()})}]}}]).service("localAudioFindingService",["$q",function(e){this.find=function(t){var n=e.defer(),o=document.getElementById(t);return o?n.resolve(o):n.reject(t),n.promise}}]).service("remoteAudioFindingService",["$q",function(e){this.find=function(t){var n=e.defer(),o=new Audio;return o.addEventListener("error",function(){n.reject()}),o.addEventListener("loadstart",function(){n.resolve(o)}),setTimeout(function(){o.src=t},1),n.promise}}]).service("cleverAudioFindingService",["$q","localAudioFindingService","remoteAudioFindingService",function(e,t,n){this.find=function(o){var a=e.defer();return o=o.replace("|","/"),t.find(o).then(a.resolve,function(){return n.find(o)}).then(a.resolve,a.reject),a.promise}}]).value("ngAudioGlobals",{muting:!1,performance:25,unlock:!0,volume:1}).factory("NgAudioObject",["cleverAudioFindingService","$rootScope","$interval","$timeout","ngAudioGlobals",function(e,t,n,o,a){return function(o,i){function s(){f.play(),f.pause(),window.removeEventListener("click",s)}function r(){E||(M&&n.cancel(M),d&&d(),u&&u(),E=!0)}function l(){E||(u=C.$watch(function(){return{volume:_.volume,currentTime:_.currentTime,progress:_.progress,muting:_.muting,loop:_.loop,playbackRate:_.playbackRate,globalVolume:a.volume}},function(e,t){e.currentTime!==t.currentTime&&_.setCurrentTime(e.currentTime),e.progress!==t.progress&&_.setProgress(e.progress),e.volume!==t.volume&&_.setVolume(e.volume),e.playbackRate!==t.playbackRate&&_.setPlaybackRate(e.playbackRate),e.globalVolume!==t.globalVolume&&(0===e.globalVolume?_.setMuting(!0):(_.setMuting(!1),_.setVolume(e.globalVolume))),g=e.loop,e.muting!==t.muting&&_.setMuting(e.muting)},!0))}function c(){if(u&&u(),f){if(A||a.muting?f.volume=0:f.volume=void 0!==_.volume?_.volume:1,h&&(f.play(),h=!1),v&&(f.pause(),f.currentTime=0,v=!1),p&&(f.pause(),p=!1),b&&(f.playbackRate=y,b=!1),m&&(f.volume=m,m=void 0),k){_.currentTime=f.currentTime,_.duration=f.duration,_.remaining=f.duration-f.currentTime,_.progress=0,_.paused=f.paused,_.src=f.src;var e=f.currentTime/f.duration;e>0&&(_.progress=e),_.currentTime>=_.duration&&P.forEach(function(e){e(_)}),g&&_.currentTime>=_.duration&&(g!==!0&&(g--,_.loop--),_.setCurrentTime(0),_.play())}A||a.muting||(_.volume=f.volume),_.audio=f}l()}var u,d,m,g,f,h=!1,p=!1,v=!1,b=!1,y=!1,A=!1,k=!0,E=!1,C=i||t,_=this;this.id=o,this.safeId=o.replace("/","|"),this.loop=0,this.unbind=function(){k=!1},this.play=function(){return h=!0,this};var P=[];this.complete=function(e){P.push(e)},this.pause=function(){p=!0},this.restart=function(){v=!0},this.stop=function(){this.restart()},this.setVolume=function(e){m=e},this.setPlaybackRate=function(e){y=e,b=!0},this.setMuting=function(e){A=e},this.setProgress=function(e){f&&f.duration&&isFinite(e)&&(f.currentTime=f.duration*e)},this.setCurrentTime=function(e){f&&f.duration&&(f.currentTime=e)},this.destroy=r,C.$on("$destroy",function(){r()}),e.find(o).then(function(e){f=e,a.unlock&&(window.addEventListener("click",s),f.addEventListener("playing",function(){window.removeEventListener("click",s)})),f.addEventListener("canplay",function(){_.canPlay=!0})},function(e){_.error=!0,console.warn(e)});var M=n(c,a.performance);d=C.$watch(function(){return a.performance},function(){n.cancel(M),M=n(c,a.performance)})}}]).service("ngAudio",["NgAudioObject","ngAudioGlobals",function(e,t){this.play=function(t,n){var o=new e(t,n);return o.play(),o},this.load=function(t,n){return new e(t,n)},this.mute=function(){t.muting=!0},this.unmute=function(){t.muting=!1},this.toggleMute=function(){t.muting=!t.muting},this.setUnlock=function(e){t.unlock=e},this.setGlobalVolume=function(e){t.volume=e}}]).filter("trackTime",function(){return function(e){var t=Math.floor(0|e),n="",o=0,a=0,i=0;return t>3599?(o=Math.floor(t/3600),a=Math.floor((t-3600*o)/60),i=t-(60*a+3600*o),1==o.toString().length&&(o="0"+Math.floor(t/3600).toString()),1==a.toString().length&&(a="0"+Math.floor((t-3600*o)/60).toString()),1==i.toString().length&&(i="0"+(t-(60*a+3600*o)).toString()),n=o+":"+a+":"+i):t>59?(a=Math.floor(t/60),i=t-60*a,1==a.toString().length&&(a="0"+Math.floor(t/60).toString()),1==i.toString().length&&(i="0"+(t-60*a).toString()),n=a+":"+i):(i=t,1==i.toString().length&&(i="0"+t.toString()),n=t+"s"),"function"==typeof Number.isNaN&&Number.isNaN(n),n}})},127:function(e,t){},128:function(e,t){},129:function(e,t){},130:function(e,t){e.exports='<div style="background-image:url(\'images/rolling.gif\');background-position:50% 10px;background-repeat:no-repeat;">\n\t<div style="text-align:center;font-size:26px;position:absolute;top:100px;width:100vw;text-shadow:1px 1px 2px white, -1px -1px 2px white,-4px 4px 4px white,-4px 4px 4px white">{{$message}}</div>\n</div>\n'},131:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=["$scope","VariablesShare",function i(e,t){o(this,i),e.progressBars=t.progressBars}];t.asideContainer={template:n(161),controller:a}},132:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.mapContainer=void 0;var i=n(124),s=n(169),r=o(s),l=["$scope","$log","$cookies","$document","$templateCache","uiGmapGoogleMapApi","api","VariablesShare",function c(e,t,n,o,s,l,u,d){a(this,c);var m=r["default"].pleaseWait({logo:"images/ico/ico_home.svg",backgroundColor:"#eeeeee",loadingHtml:"<div class='sk-cube-grid'><div class='sk-cube sk-cube1'></div><div class='sk-cube sk-cube2'></div><div class='sk-cube sk-cube3'></div><div class='sk-cube sk-cube4'></div><div class='sk-cube sk-cube5'></div><div class='sk-cube sk-cube6'></div><div class='sk-cube sk-cube7'></div><div class='sk-cube sk-cube8'></div><div class='sk-cube sk-cube9'></div></div>"});if(angular.isUndefined(d.socID))throw r["default"].pleaseWait({logo:"images/ico/ico_home.svg",backgroundColor:"#eeeeee",loadingHtml:"Merci de vous connecter à Andsoft"}),new Error("Pas de socid");e.searchbox={template:"../containers/templateId.html",events:{places_changed:function(t){e.map.control.getGMap().panTo({lat:t.getPlaces()[0].geometry.location.lat(),lng:t.getPlaces()[0].geometry.location.lng()}),e.markerPlaces={coords:{latitude:t.getPlaces()[0].geometry.location.lat(),longitude:t.getPlaces()[0].geometry.location.lng()},options:{icon:{url:"images/ico/ico_places.svg"}}}}}},e.markers=d.markers,e.markersPredicts=d.markersPredicts,e.Trajets=d.trajets,e.TrajetMatrix=d.trajetMatrix,e.attentes=d.attentes,e.Trafficshow=d.Trafficshow,e.map=i.config.mapOptions,e.windowOptions=d.windowOptions,e.clusterOptions=i.config.cluserOptions,e.clusterOptionsOther=i.config.clusterOptionsOther,e.clusterPreOptions=i.config.cluserPreOptions,e.clusterChauffeurOptions=i.config.clusterChauffeurOptions,l.then(function(){u.loadSocposition(d.socID).then(function(t){var n=t[0].SOCGOOGLEMAP.split(","),o=n[0],a=n[1].split("|");d.mapObject=e.map.control.getGMap(),e.map.control.getGMap().panTo({lat:Number(o),lng:Number(a[0])}),d.homeMarker={id:10,coords:{latitude:o,longitude:a[0]},options:{icon:{url:"images/ico/ico_home.svg"}}},d.addmarkerLastPos(d.homeMarker),e.markerLastPos=d.markerLastPos,e.markerLastPosOther=d.markerLastPosOther,m.finish()})})}];t.mapContainer={template:n(162),controller:l}},133:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.messageToolbar=void 0;var i=n(2),s=o(i),r=["$scope","$interval","$timeout","$parse","$mdToast","$cookies","$log","$element","VariablesShare","api","ngAudio",function l(e,t,n,o,i,r,c,u,d,m,g){function f(){e.messageArchiveRecu=[],e.messageArchiveEmis=[],e.messageArchivePromise=m.loadMessages(d.socID,"1440","2").then(function(t){t.forEach(function(t){var n={id:Number(t.DMEID),chauffeur:t.DMECODECHAUF,text:t.DMEMESSAGE,datereception:t.DMEDATERECU,isLu:!1};e.messageArchiveRecu.push(n)}),e.messageArchiveAllRecu=e.messageArchiveRecu,angular.isDefined(e.selectedChauffeursRecu)&&(e.messageArchiveRecu=s["default"].filter(e.messageArchiveAllRecu,{chauffeur:e.selectedChauffeursRecu.NOMANDSOFT}),0===e.messageArchiveRecu.length&&e.messageArchiveRecu.push({id:666,text:"Aucun message de "+e.selectedChauffeursRecu.NOMANDSOFT,isLu:!1}))}),e.messageArchiveEmisPromise=m.loadMessages(d.socID,"1440","1").then(function(t){t.forEach(function(t){var n={id:Number(t.DMEID),chauffeur:t.DMECODECHAUF,text:t.DMEMESSAGE,isLu:!1};""===t.DMEDATELU?n.datereception="Non lu":n.datereception="lu à "+t.DMEDATELU,e.messageArchiveEmis.push(n)}),e.messageArchiveAllEmis=e.messageArchiveEmis,angular.isDefined(e.selectedChauffeursEmis)&&(e.messageArchiveEmis=s["default"].filter(e.messageArchiveAllEmis,{chauffeur:e.selectedChauffeursEmis.NOMANDSOFT})),e.switch_nonlu&&(e.messageArchiveEmis=s["default"].filter(e.messageArchiveEmis,{datereception:"Non lu"}),0===e.messageArchiveEmis.length&&e.messageArchiveEmis.push({id:666,text:"Aucun message de "+e.selectedChauffeursEmis.NOMANDSOFT,isLu:!1}))})}a(this,l),u.find("input").on("keydown",function(e){e.stopPropagation()}),e.messageNonlu=d.messagesNonlu,e.messageArchive=[],e.chauffeurs=d.chauffeurs,e.forminput={},e.messagetoolbarInputmessageActive=!1,m.loadMessages(d.socID,"60","2").then(function(e){if(e.forEach(function(e){var t={id:Number(e.DMEID),chauffeur:e.DMECODECHAUF,text:e.DMEMESSAGE,datereception:e.DMEDATERECU,isLu:!1};d.addMessage(t)}),d.messagesNonlu.length>0&&"false"===r.get("isSoundMuted")){var t=g.load("assets/sounds/newmessage.mp3");t.play()}}),e.cancelSelected=function(){e.selectedChauffeurs.length=0},e.sendMessage=function(t,n){var o=[];t.forEach(function(e){o.push(e.NOMANDSOFT)});var a="unknown";a=r.get("USRLOGIN");var i={emetteur:a,chauffeurs:o,textMessage:n,typeMessage:1};m.postMessages(i),e.Textmessage=""},e.sendMessageReply=function(t,n){if(angular.isDefined(n)){var o="unknown";o=r.get("USRLOGIN");var a={emetteur:o,chauffeurs:[t],textMessage:n,typeMessage:1};m.postMessages(a).then(function(n){if(c.log(n),n===!0){var o=i.simple().textContent("Message envoyé à "+t).action("X").highlightAction(!0).position("top right");i.show(o),e.forminput={}}else{var a=i.simple().textContent("Une erreur est survenue, veuillez réessayer").action("X").highlightAction(!0).position("bottom right");i.show(a)}})}else{var s=i.simple().textContent("Pas de message").action("X").highlightAction(!0).position("bottom right");i.show(s)}},t(function(){m.loadMessages(d.socID,"2","2").then(function(e){if(e.forEach(function(e){var t={id:Number(e.DMEID),chauffeur:e.DMECODECHAUF,text:e.DMEMESSAGE,datereception:e.DMEDATERECU,isLu:!1};d.addMessage(t)}),d.messagesNonlu.length>0&&"false"===r.get("isSoundMuted")){var t=g.load("assets/sounds/newmessage.mp3");t.play()}})},12e4),e.markAsRead=function(t){e.messageNonlu.forEach(function(n,o){n.id===t&&e.messageNonlu.splice(o,1)}),0===e.messageNonlu.length&&(e.messagetoolbarActive=!1),d.messagesNonlu=e.messageNonlu},e.loadMessagesArchive=f,e.$watch("selectedChauffeursRecu",function(){angular.isDefined(e.selectedChauffeursRecu)&&("Tous"===e.selectedChauffeursRecu?(e.messageArchiveRecu=[],e.messageArchiveRecu=e.messageArchiveAllRecu):(e.messageArchiveRecu=s["default"].filter(e.messageArchiveAllRecu,{chauffeur:e.selectedChauffeursRecu.NOMANDSOFT}),0===e.messageArchiveRecu.length&&e.messageArchiveRecu.push({id:666,text:"Aucun message de "+e.selectedChauffeursRecu.NOMANDSOFT,isLu:!1})))}),e.$watch("selectedChauffeursEmis",function(){angular.isDefined(e.selectedChauffeursEmis)&&("Tous"===e.selectedChauffeursEmis?(e.messageArchiveEmis=[],e.messageArchiveEmis=e.messageArchiveAllEmis,e.switch_nonlu&&(e.messageArchiveEmis=s["default"].filter(e.messageArchiveEmis,{datereception:"Non lu"}))):(e.messageArchiveEmis=s["default"].filter(e.messageArchiveAllEmis,{chauffeur:e.selectedChauffeursEmis.NOMANDSOFT}),e.switch_nonlu&&(e.messageArchiveEmis=s["default"].filter(e.messageArchiveEmis,{datereception:"Non lu"})),0===e.messageArchiveEmis.length&&e.messageArchiveEmis.push({id:666,text:"Aucun message de "+e.selectedChauffeursEmis.NOMANDSOFT,isLu:!1})))}),e.filterNonlu=function(t){t?(e.messageArchiveEmis=s["default"].filter(e.messageArchiveEmis,{datereception:"Non lu"}),0===e.messageArchiveEmis.length&&e.messageArchiveEmis.push({id:666,text:"Aucun message de "+e.selectedChauffeursEmis.NOMANDSOFT,isLu:!1})):(e.messageArchiveEmis=e.messageArchiveAllEmis,angular.isDefined(e.selectedChauffeursEmis)&&"Tous"!==e.selectedChauffeursEmis&&(e.messageArchiveEmis=s["default"].filter(e.messageArchiveAllEmis,{chauffeur:e.selectedChauffeursEmis.NOMANDSOFT}),0===e.messageArchiveEmis.length&&e.messageArchiveEmis.push({id:666,text:"Aucun message de "+e.selectedChauffeursEmis.NOMANDSOFT,isLu:!1})))}}];t.messageToolbar={template:n(163),controller:r}},134:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.toolBar=void 0;var i=n(124),s=n(4),r=o(s),l=["$scope","$log","$document","$interval","$timeout","$cookies","$mdToast","$mdDialog","api","uiGmapGoogleMapApi","getPositionsFun","getTrajetsFun","getAttentesFun","getProgressFun","getPredictFun","$element","VariablesShare",function c(e,t,n,o,s,l,u,d,m,g,f,h,p,v,b,y,A){function k(n){n.keyCode===N[I++]?I===N.length&&(I=0,t.log("admin"),e.adminMode=!0,e.$apply()):I=0}function E(){n.off("keydown",k)}function C(){A.cleanLastPos(),A.cleanProgressBars(),A.cleanAttentes(),A.cleanTrajets(),A.cleanTrajetMatrix(),A.cleanPredict(),angular.isDefined(e.selectedChauffeurs)&&e.selectedChauffeurs.length>0&&(M(e.selectedChauffeurs),L(e.selectedChauffeurs,e.dateCalendar),e.cbLivraison&&_(e.selectedChauffeurs,!0,e.dateCalendar,"liv"),e.cbRamasses&&_(e.selectedChauffeurs,!0,e.dateCalendar,"ram"),e.cbTrajet&&w(e.selectedChauffeurs,!0,e.dateCalendar),e.cbAttentes&&T(e.selectedChauffeurs,!0,e.dateCalendar),e.cbPredict&&S(e.selectedChauffeurs,!0),e.cbChauffeurs&&!e.cbLivraison&&!e.cbRamasses&&!e.cbTrajet),t.log(e.cbChauffeurs),e.cbChauffeurs&&P(!0)}function _(e,n,o,a){if(n){A.cleanMarkers();var i=f.getPositions(e,o,a);i.message="Chargement des positions",A.setPromise(i),i.then(function(){A.clearPromise()},function(e){t.error(e)})}else A.cleanMarkers()}function P(e){e?M(x,!0):A.cleanLastPosOther()}function M(e,n){g.then(function(){e.forEach(function(e){m.loadLastPos(e.SALCODE).then(function(o){if(o.length>0){var a=o[0].DGPDERNIEREPOS.replace(",",".").replace(",","."),i=a.split(";"),s=o[0].DGPDERNIEREHEURE.split(" "),r={id:e.SALCODE,coords:{latitude:i[0],longitude:i[1]},options:{icon:{},labelAnchor:"20 40",labelClass:"labels",labelStyle:{"box-shadow":"2px 2px 2px "+e.color}},events:{click:function(e,t,n){n.show=!n.show},rightclick:function(){t.log(e.color)}}};angular.isUndefined(n)?(r.options.labelContent=e.SALNOM+"<br>"+s[1],r.options.icon.url="images/ICO/ico_truck.svg",A.addmarkerLastPos(r)):(r.options.labelContent=""+e.SALNOM,r.options.icon.url="images/ICO/ico_truck_other.svg",A.addmarkerLastPosOther(r))}else{var l=u.simple().textContent("Pas de données GPS pour "+e.SALNOM).action("X").highlightAction(!0).position("top right");u.show(l),t.info("Pas de données GPS pour "+e.SALCODE)}})}),A.addmarkerLastPos(A.homeMarker)})}function O(n){n?(e.interval=o(function(){e.progressReload=0,C()},12e4),e.intervalProgress=o(function(){e.progressReload+=1},1200)):(t.log("Interval stop"),o.cancel(e.interval),o.cancel(e.intervalProgress))}function T(e,n,o){if(n){A.cleanAttentes();var a=p.getAttentes(e,o);a.message="Chargement des Attentes",A.setPromise(a),a.then(function(){A.clearPromise()},function(e){t.error(e)})}else A.cleanAttentes()}function w(e,n,o){if(n){A.cleanTrajets();var a=h.getTrajets(e,o);a.message="Chargement des Trajets",A.setPromise(a),a.then(function(){A.clearPromise()},function(e){t.error(e)})}else A.cleanTrajets()}function S(e,n){if(n){A.cleanPredict();var o=b.getPredict(e);o.message="Chargement des Prédictions",A.setPromise(o),o.then(function(){A.clearPromise()},function(e){t.error(e)})}else A.cleanPredict()}function L(e,n){var o=v.getProgress(e,n);o.then(function(){},function(e){t.error(e)})}a(this,c),e.dateCalendar=new Date,e.selectedChauffeurs=[],e.clearSearchTerm=function(){e.searchTerm=""},e.adminMode=!1,e.openMenu=function(e,t){e(t)},y.find("input").on("keydown",function(e){e.stopPropagation()});var x=[];A.SocieteName=l.get("VALDEF").split("|")[1].split("_")[0],A.socID=l.get("SOCID"),m.loadChauffeurs(A.socID,A.SocieteName).then(function(t){e.chauffeurs=angular.fromJson(t),e.chauffeurs.forEach(function(e,t){e.color=i.config.chauffColor[t],x.push(e),A.addChauffeur(e)})}),e.getPositions=_,e.getTrajets=w,e.getAttentes=T,e.getPredicts=S,e.getGpsChauffeurs=P,e.reloadAuto=O,e.reportDialog=function(){try{throw new Error("rapport de bug utilisateur")}catch(e){r["default"].captureException(e),r["default"].showReportDialog()}},e.cancelSelected=function(){e.selectedChauffeurs.length=0,A.cleanLastPos(),A.cleanProgressBars(),A.cleanAttentes(),A.cleanTrajets(),A.cleanTrajetMatrix(),A.cleanPredict()};var D="";angular.isDefined(l.get("isSoundMuted"))?(D=l.get("isSoundMuted"),"false"===D?e.urlSound="images/ico/ico_speaker.png":e.urlSound="images/ico/ico_mute.png"):(l.put("isSoundMuted","false"),e.urlSound="images/ico/ico_speaker.png"),e.muteSound=function(){"false"===D?(l.put("isSoundMuted","true"),e.urlSound="images/ico/ico_mute.png",D="true"):(e.urlSound="images/ico/ico_speaker.png",l.put("isSoundMuted","false"),D="false")},e.cookiesSoc=[{socName:"Comaldis 28",socId:68},{socName:"Comaldis 60",socId:69},{socName:"Mj",socId:3},{socName:"Rodis",socId:36},{socName:"Jeantet",socId:16},{socName:"Stjo",socId:55},{socName:"Transaldis",socId:61},{socName:"Sdtl",socId:29},{socName:"Tradis",socId:82}],e.setCookie=function(t){A.socID=t,68===t&&(A.SocieteName="COM28"),69===t&&(A.SocieteName="COM60"),m.loadChauffeurs(A.socID,A.SocieteName).then(function(t){e.chauffeurs=angular.fromJson(t),e.chauffeurs.forEach(function(e,t){e.color=i.config.chauffColor[t],x.push(e),A.addChauffeur(e)})}),m.loadSocposition(A.socID).then(function(e){var t=e[0].SOCGOOGLEMAP.split(","),n=t[0],o=t[1].split("|");A.mapObject.panTo({lat:Number(n),lng:Number(o[0])}),A.homeMarker={id:10,coords:{latitude:n,longitude:o[0]},options:{icon:{url:"images/ico/ico_home.svg"}}},A.addmarkerLastPos(A.homeMarker)}),e.selectedChauffeurs.length=0,A.cleanLastPos(),A.cleanProgressBars(),A.cleanAttentes(),A.cleanTrajets(),A.cleanTrajetMatrix(),A.cleanPredict()};var N=[65,68,77,73,78],I=0;n.on("keydown",k),e.$on("$destroy",E),e.allSelected=function(){x.forEach(function(t){e.selectedChauffeurs.push(t)}),C()},e.$watch("selectedChauffeurs",function(){C()}),e.fitBounds=function(){A.mapObject.setZoom(8)},e.refresh=function(){C(),A.addmarkerLastPos(A.homeMarker)}}];t.toolBar={template:n(164),controller:l}},135:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=["$scope","$log","VariablesShare",function i(e,t,n){o(this,i),e.Promise=n.Promises}];t.App={template:n(165),controller:a}},136:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.diversFun=function(){function e(){n(this,e)}return o(e,[{key:"convertDate",value:function(e){function t(e){return e<10?"0"+e:e}var n=new Date(e);return[t(n.getDate()),t(n.getMonth()+1),n.getFullYear()].join("/")}},{key:"getImg",value:function(e){var t="";switch(e){case"LIVCFM":t="images/ico/ico_liv_v.svg";break;case"RAMCFM":t="images/ico/ico_ram_v.svg";break;case"ECHCFM":t="images/ico/ico_ram_v.svg";break;case"LIV":t="images/ico/ico_pre.svg";break;case"RAM":t="images/ico/ico_pre_ram.svg";break;default:t="images/ico/ico_liv_a.svg"}return t}},{key:"getTime",value:function(e){try{var t=e.split(" "),n=t[1].split(":");return n[0]+":"+n[1]}catch(o){return"#error"}}},{key:"getClassColor",value:function(e){var t=void 0;switch(e){case"LIVCFM":t="green";break;case"RAMCFM":t="green";break;case"ECHCFM":t="green";break;case"pack":t="purple";break;default:t="red"}return t}},{key:"getIco",value:function(e){var t=void 0;switch(e){case"LIVCFM":t='<i class="fa fa-check" aria-hidden="true"></i> ';break;case"RAMCFM":t='<i class="fa fa-check" aria-hidden="true"></i> ';break;case"ECHCFM":t='<i class="fa fa-check" aria-hidden="true"></i> ';break;case"pack":t='<i class="fa fa-suitcase" aria-hidden="true"></i> ';break;case"nogps":t='<i class="fa fa-map" aria-hidden="true"></i> ';break;default:t='<i class="fa fa-exclamation-triangle" aria-hidden="true"></i> '}return t}},{key:"getDistanceFromLatLonInKm",value:function(e,t,n,o){function a(e){return e*(Math.PI/180)}var i=6371,s=a(n-e),r=a(o-t),l=Math.sin(s/2)*Math.sin(s/2)+Math.cos(a(e))*Math.cos(a(n))*Math.sin(r/2)*Math.sin(r/2),c=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),u=i*c;return u}}]),e}()},137:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.getAttentesFun=function(){function e(t,o,a,i,s,r,l,c){n(this,e),this.log=t,this.timeout=o,this.q=a,this.mdToast=i,this.uiGmapGoogleMapApi=s,this.api=r,this.diversFun=l,this.VariablesShare=c}return e.$inject=["$log","$timeout","$q","$mdToast","uiGmapGoogleMapApi","api","diversFun","VariablesShare"],o(e,[{key:"getAttentes",value:function(e,t){var n=this;return this.q(function(o,a){try{n.uiGmapGoogleMapApi.then(function(a){var i=[];e.forEach(function(e){var o=n.q.defer();n.api.loadTrajet(e.SALCODE,n.diversFun.convertDate(t)).then(function(t){t.length>0?!function(){var i=t[0].DGPPOSITION.split("|"),s=t[0].DGPHEUREPOS.split("|"),r={id:Math.floor(9999999*Math.random()+1),chauffeur:t[0].DGPCOND,coords:{latitude:0,longitude:0},options:{icon:{url:"images/ICO/ico_attente.svg"},animation:a.Animation.Hp,labelContent:"",labelAnchor:"20 40",labelClass:"labels",labelStyle:{"box-shadow":"2px 2px 2px "+e.color}}},l=!1,c="",u=[];i.forEach(function(o,d){var m=o.replace(",",".").replace(",",".").split(";");if(n.diversFun.getDistanceFromLatLonInKm(r.coords.latitude,r.coords.longitude,Number(m[0]),Number(m[1]))<.15||0===d){if(0===d?r={id:Math.floor(9999999*Math.random()+1),chauffeur:t[0].DGPCOND,origineHeure:s[d],endHeure:s[d],coords:{latitude:Number(m[0]),longitude:Number(m[1])},options:{icon:{url:"images/ICO/ico_attente.svg"},animation:a.Animation.Hp,labelAnchor:"20 40",labelClass:"labels",labelStyle:{"box-shadow":"2px 2px 2px "+e.color}}}:(l?r={id:Math.floor(9999999*Math.random()+1),chauffeur:t[0].DGPCOND,origineHeure:c,endHeure:s[d],coords:{latitude:Number(m[0]),longitude:Number(m[1])},options:{icon:{url:"images/ICO/ico_attente.svg"},animation:a.Animation.Hp,labelAnchor:"20 40",labelClass:"labels",labelStyle:{"box-shadow":"2px 2px 2px "+e.color}}}:(c=s[d],r={id:Math.floor(9999999*Math.random()+1),chauffeur:t[0].DGPCOND,origineHeure:c,endHeure:s[d],coords:{latitude:Number(m[0]),longitude:Number(m[1])},options:{icon:{url:"images/ICO/ico_attente.svg"},animation:a.Animation.Hp,labelAnchor:"20 40",labelClass:"labels",labelStyle:{"box-shadow":"2px 2px 2px "+e.color}}}),l=!0),i.length===d+1){var g=r.origineHeure.split(":"),f=r.endHeure.split(":"),h=new Date(0,0,0,g[0],g[1]),p=new Date(0,0,0,f[0],f[1]),v=p-h,b=v/1e3/60;b>10&&(r.options.labelContent=b+" minutes<br>"+c+" à "+s[d],u.push(r))}}else{if(l){l=!1;var y=r.origineHeure.split(":"),A=r.endHeure.split(":"),k=new Date(0,0,0,y[0],y[1]),E=new Date(0,0,0,A[0],A[1]),C=E-k,_=C/1e3/60;_>10&&(r.options.labelContent=_+" minutes<br>"+c+" à "+s[d],u.push(r))}r={id:Math.floor(9999999*Math.random()+1),chauffeur:t[0].DGPCOND,origineHeure:s[d],endHeure:s[d],coords:{latitude:Number(m[0]),longitude:Number(m[1])},options:{icon:{url:"images/ICO/ico_attente.svg"},animation:a.Animation.Hp,labelAnchor:"20 40",labelClass:"labels",labelStyle:{"box-shadow":"2px 2px 2px "+e.color}}}}}),n.VariablesShare.addAttentes(u),o.resolve()}():o.resolve()}),i.push(o.promise)}),n.q.all(i).then(function(){o("getAttentes finish")},function(e){n.log.log(e)})})}catch(i){a(i)}})}}]),e}()},138:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.getPositionsFun=function(){function e(t,o,a,i,s,r,l,c){n(this,e),this.log=t,this.q=a,this.timeout=o,this.mdToast=i,this.uiGmapGoogleMapApi=s,this.api=r,this.diversFun=l,this.VariablesShare=c}return e.$inject=["$log","$timeout","$q","$mdToast","uiGmapGoogleMapApi","api","diversFun","VariablesShare"],o(e,[{key:"getPositions",value:function(e,t,n){var o=this;return this.q(function(a,i){try{o.uiGmapGoogleMapApi.then(function(i){var s=[];e.forEach(function(e){var a=o.q.defer();o.api.loadPositions(e.SALCODE,o.diversFun.convertDate(t),n).then(function(t){if(t.length>0)t.forEach(function(t){if("PARTIC"!==t.CODEANO&&"FLASHAGE"!==t.CODEANO&&""!==t.POSGPS&&"FLASHAGEIMP"!==t.CODEANO){var n=t.POSGPS.replace(",",".").replace(",","."),a=n.split(";"),s=t.DATESUIVI.split(" "),r={id:Number(t.ID),numpos:t.NUM,coords:{latitude:a[0],longitude:a[1]},design:{color:o.diversFun.getClassColor(t.CODEANO),ico:o.diversFun.getIco(t.CODEANO)},options:{icon:{url:o.diversFun.getImg(t.CODEANO)},animation:i.Animation.Hp,labelContent:s[1],labelAnchor:"20 40",labelClass:"labels",labelStyle:{"box-shadow":"2px 2px 2px "+e.color}},events:{click:function(e,t,n){n.show=!n.show,o.log.log(n)},rightclick:function(){o.log.log(t.NUM)}},info:{codeano:t.CODEANO,libano:t.LIBANO,memo:t.MEMO,datesuivi:t.DATESUIVI,livnom:t.LIVNOM,nomclient:t.NOMCLIENT,expnom:t.EXPNOM,micode:t.MICODE,voydbx:t.VOYBDX,livadr:t.LIVADR,livcp:t.LIVVILCP,livville:t.LIVVILLIB,expadr:t.EXPADR,expcp:t.EXPVILCP,expville:t.EXPVILLIB},infowindowOptions:{url:"app/containers/infowindowTemplate.html",param:{num:t.NUM},options:{boxClass:"infobox",content:"Text"}}};o.VariablesShare.addmarkers(r)}});else{var n=o.mdToast.simple().textContent("Pas de données de positions pour "+e.SALNOM).action("X").highlightAction(!0).position("top right");o.mdToast.show(n)}a.resolve()}),s.push(a.promise)}),o.q.all(s).then(function(){a("getPosition finish")},function(e){o.log.log(e)})})}catch(s){i(s)}})}}]),e}()},139:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.getPredictFun=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(2),r=o(s);t.getPredictFun=function(){function e(t,n,o,i,s,r,l,c){a(this,e),this.log=t,this.q=n,this.timeout=o,this.mdToast=i,this.uiGmapGoogleMapApi=s,this.api=r,this.diversFun=l,this.VariablesShare=c}return e.$inject=["$log","$q","$timeout","$mdToast","uiGmapGoogleMapApi","api","diversFun","VariablesShare"],i(e,[{key:"getPredict",value:function(e){var t=this;return this.q(function(n,o){try{t.uiGmapGoogleMapApi.then(function(o){var a=[],i=[];e.forEach(function(e){var n=t.q.defer();t.api.loadPredict(e.NOMANDSOFT).then(function(a){a.length>0?!function(){var s=r["default"].find(t.VariablesShare.progressBars,function(t){return t.chauffeur===e.SALNOM});a.forEach(function(l){if(""!==l.OTPOTSNUM){var c=r["default"].find(s.positionsAll,function(e){return l.OTPOTSNUM===e.num});angular.isUndefined(c)?!function(){var s="",c="",u="",d="";"LIV"===l.OTPTRSCODE?(s=l.OTPARRNOM,c=l.OTPARRADR1,u=l.OTPARRUSRVILCP,d=l.OTPARRUSRVILLIB):(s=l.OTPDEPNOM,c=l.OTPDEPADR1,u=l.OTPDEPUSRVILCP,d=l.OTPDEPUSRVILLIB),t.api.getGeocode(s,c,u,d).then(function(m){if(t.log.log(m),"ZERO_RESULTS"===m.status){var g={nomFail:s,adrFail:c,cpFail:u,villeFail:d};i.push(g)}else{var f=r["default"].find(t.VariablesShare.markerLastPos,function(t){return e.SALCODE===t.id});t.api.getMatrix(f.coords.latitude+","+f.coords.longitude,m.results[0].geometry.location.lat+","+m.results[0].geometry.location.lng).then(function(n){var a=n.routes[0].legs[0].duration.text,i={id:l.OTPID,numpos:l.OTPOTSNUM,points:n.routes[0].overview_polyline.points,coords:{latitude:m.results[0].geometry.location.lat,longitude:m.results[0].geometry.location.lng},options:{icon:{url:t.diversFun.getImg(l.OTPTRSCODE)},animation:o.Animation.Hp,labelContent:s+" "+d+"<br>à "+a,labelAnchor:"20 40",labelClass:"labels",labelStyle:{"box-shadow":"2px 2px 2px "+e.color}},events:{mouseover:function(){var e=o.geometry.encoding.decodePath(n.routes[0].overview_polyline.points),a=[];e.forEach(function(e){a.push({latitude:Number(e.lat()),longitude:Number(e.lng())})});var i={id:99,path:a,stroke:{
color:"#2196f3",weight:2.5},editable:!1,draggable:!1,geodesic:!0,visible:!0,icons:[{icon:{path:o.SymbolPath.FORWARD_OPEN_ARROW},offset:"25px",repeat:"200px"}]};t.VariablesShare.addTrajetMatrix(i)},mouseout:function(){t.VariablesShare.cleanTrajetMatrix()}},info:{nomPre:s,adrPre:c,cpPre:u,villePre:d}};t.VariablesShare.addPredict(i)})}n.resolve(a)})}():n.resolve()}})}():n.resolve()}),a.push(n.promise)}),t.q.all(a).then(function(){t.timeout(function(){var e="";if(i.length>0){i.forEach(function(t){e=e+" "+t.nomFail});var n=t.mdToast.simple().textContent("Pas de résultat pour"+e).action("X").highlightAction(!0).position("top right").hideDelay(7e3);t.mdToast.show(n)}},500),n("getPredict finish")},function(e){t.log.log(e)})})}catch(a){o(a)}})}}]),e}()},140:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.getProgressFun=function(){function e(t,o,a,i,s){function r(e){switch(e){case"LIVCFM":case"RAMCFM":case"ECHCFM":return"images/ico_png/ico_valid.png";default:return"images/ico_png/ico_anom.png"}}n(this,e),this.log=t,this.q=o,this.api=a,this.diversFun=i,this.VariablesShare=s,this.getIco=r}return e.$inject=["$log","$q","api","diversFun","VariablesShare"],o(e,[{key:"getProgress",value:function(e,t){var n=this;return this.q(function(o,a){try{!function(){var a=[];e.forEach(function(e){var o=n.q.defer();n.api.loadProgress(e.SALCODE,n.diversFun.convertDate(t)).then(function(a){var i={chauffeur:e.SALNOM,color:e.color,livTot:0,ramTot:0};a.forEach(function(e){"LIV"===e.typeMission?(i.liv=e.nbFait,i.livTot=e.nbPos,i.livPercent=100*Number(e.nbFait)/Number(e.nbPos)):(i.ram=e.nbFait,i.ramTot=e.nbPos,i.ramPercent=100*Number(e.nbFait)/Number(e.nbPos))}),i.positionsAll=[],i.liv>0&&n.api.loadPositions(e.SALCODE,n.diversFun.convertDate(t),"liv").then(function(e){i.positionsLivraisons=[],e.forEach(function(e){var t=e.DATESUIVI.split(" ");if("FLASHAGE"!==e.CODEANO&&"FLASHAGEIMP"!==e.CODEANO){var o={id:e.ID,num:e.NUM,memo:e.MEMO,codeano:e.CODEANO,datesuivi:t[1],nom:e.EXPNOM,adressse:e.EXPADR,cp:e.EXPVILCP,ville:e.EXPVILLIB,ico:n.getIco(e.CODEANO)};i.positionsLivraisons.push(o),i.positionsAll.push(o)}})}),i.ram>0&&n.api.loadPositions(e.SALCODE,n.diversFun.convertDate(t),"ram").then(function(e){i.positionsRamasses=[],e.forEach(function(e){var t=e.DATESUIVI.split(" ");if("FLASHAGE"!==e.CODEANO&&"FLASHAGEIMP"!==e.CODEANO){var o={id:e.ID,num:e.NUM,memo:e.MEMO,codeano:e.CODEANO,datesuivi:t[1],nom:e.LIVNOM,adressse:e.EXPADR,cp:e.EXPVILCP,ville:e.EXPVILLIB,ico:n.getIco(e.CODEANO)};i.positionsRamasses.push(o),i.positionsAll.push(o)}})}),n.VariablesShare.addProgress(i),o.resolve()}),a.push(o.promise)}),n.q.all(a).then(function(){o("getProgress finish")},function(e){n.log.log(e)})}()}catch(i){a(i)}})}}]),e}()},141:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.getTrajetsFun=function(){function e(t,o,a,i,s,r,l,c){n(this,e),this.log=t,this.q=o,this.timeout=a,this.mdToast=i,this.uiGmapGoogleMapApi=s,this.api=r,this.diversFun=l,this.VariablesShare=c}return e.$inject=["$log","$q","$timeout","$mdToast","uiGmapGoogleMapApi","api","diversFun","VariablesShare"],o(e,[{key:"getTrajets",value:function(e,t){var n=this;return this.q(function(o,a){try{n.uiGmapGoogleMapApi.then(function(a){var i=[];e.forEach(function(e){var o=n.q.defer();n.api.loadTrajet(e.SALCODE,n.diversFun.convertDate(t)).then(function(t){var i=t[0].DGPPOSITION.split("|"),s=[];i.forEach(function(e){var t=e.replace(",",".").replace(",",".").split(";");s.push({latitude:Number(t[0]),longitude:Number(t[1])})});var r={id:Date.now,path:s,stroke:{color:e.color,weight:2.5},editable:!1,draggable:!1,geodesic:!0,visible:!0,events:{click:function(e,t,o){n.log.log(e),n.log.log(t),n.log.log(o)}},icons:[{icon:{path:a.SymbolPath.FORWARD_OPEN_ARROW},offset:"25px",repeat:"200px"}]};n.VariablesShare.addTrajet(r),o.resolve()}),i.push(o.promise)}),n.q.all(i).then(function(){o("getTrajet finish")},function(e){n.log.log(e)})})}catch(i){a(i)}})}}]),e}()},142:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="https://andsoft.jeantettransport.com/dms/api/";t.Api=function(){function e(t,o){n(this,e),this.http=t,this.log=o}return e.$inject=["$http","$log"],o(e,[{key:"loadChauffeurs",value:function(e,t){return angular.isDefined(t)?(this.log.log(a+"dmssalarie?val="+e+"&agence="+t),this.http.get(a+"dmssalarie?val="+e+"&agence="+t).then(function(e){return e.data})):(this.log.log(a+"dmssalarie?val=16&agence="),this.http.get(a+"dmssalarie?val="+e+"&agence=").then(function(e){return e.data}))}},{key:"loadSocposition",value:function(e){return this.log.log(a+"dmsCenter?val="+e),this.http.get(a+"dmsCenter?val="+e).then(function(e){return e.data})}},{key:"loadLastPos",value:function(e){return this.log.log(a+"dmsLastPosGpsT?val="+e),this.http.get(a+"dmsLastPosGpsT?val="+e).then(function(e){return e.data})}},{key:"loadTrajet",value:function(e,t){return this.log.log(a+"dmsTrajetT?val="+e+"&date="+t),this.http.get(a+"dmsTrajetT?val="+e+"&date="+t).then(function(e){return e.data})}},{key:"loadPositions",value:function(e,t,n){return"liv"===n?(this.log.log(a+"dmsPosT?val="+e+"&date="+t),this.http.get(a+"dmsPosT?val="+e+"&date="+t).then(function(e){return e.data})):(this.log.log(a+"dmsRamT?val="+e+"&date="+t),this.http.get(a+"dmsRamT?val="+e+"&date="+t).then(function(e){return e.data}))}},{key:"loadMessages",value:function(e,t,n){return this.log.log(a+"dmsMessage?val="+e+"&minute="+t+"&type="+n),this.http.get(a+"dmsMessage?val="+e+"&minute="+t+"&type="+n).then(function(e){return e.data})}},{key:"postMessages",value:function(e){return this.http.post("http://10.1.2.65/MVCDMS/api/message",e).then(function(e){return e.data})}},{key:"loadProgress",value:function(e,t){return this.log.log(a+"dmsGaugeChauffT?val="+e+"&date="+t),this.http.get(a+"dmsGaugeChauffT?val="+e+"&date="+t).then(function(e){return e.data})}},{key:"loadPredict",value:function(e){return this.log.log(a+"dmsInfoPos?val="+e),this.http.get(a+"dmsInfoPos?val="+e).then(function(e){return e.data})}},{key:"getGeocode",value:function(e,t,n,o){return this.log.log("https://maps.googleapis.com/maps/api/geocode/json?address="+e.split(" ").join("+")+","+t.split(" ").join("+")+","+n+","+o.split(" ").join("+")+"&key=AIzaSyBOeBriCeuw0BETvQRlKloB4KoooPYzu4g"),this.http.get("https://maps.googleapis.com/maps/api/geocode/json?address="+e.split(" ").join("+")+","+t.split(" ").join("+")+","+n+","+o.split(" ").join("+")+"&key=AIzaSyBOeBriCeuw0BETvQRlKloB4KoooPYzu4g").then(function(e){return e.data})}},{key:"getMatrix",value:function(e,t){return this.http.get(a+"mapsDirections?origins="+e+"&destinations="+t).then(function(e){return e.data})}}]),e}()},143:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.VariablesShare=function(){function e(t,o,a){n(this,e),this.log=t,this.q=o,this.timeout=a;var i=0,s="",r={},l=[],c=[],u=[],d=[],m=[],g=[],f={visible:!1},h=[],p=[],v=[],b=!0,y=[],A=[];this.socID=i,this.Societe=s,this.mapObject=r,this.chauffeurs=l,this.markers=c,this.markersPredicts=u,this.markerLastPos=d,this.markerLastPosOther=m,this.homeMarker=g,this.windowOptions=f,this.trajets=h,this.trajetMatrix=p,this.attentes=v,this.Trafficshow=b,this.messagesNonlu=y,this.progressBars=A;var k=[];this.Promises=k}return e.$inject=["$log","$q","$timeout"],o(e,[{key:"setPromise",value:function(e){this.Promises.push(e)}},{key:"clearPromise",value:function(){this.Promises.length=0}},{key:"addmarkers",value:function(e){this.markers.push(e)}},{key:"addPredict",value:function(e){this.markersPredicts.push(e)}},{key:"addmarkerLastPos",value:function(e){this.markerLastPos.push(e)}},{key:"addmarkerLastPosOther",value:function(e){this.markerLastPosOther.push(e)}},{key:"addChauffeur",value:function(e){this.chauffeurs.push(e)}},{key:"cleanMarkers",value:function(){this.markers.length=0}},{key:"cleanPredict",value:function(){this.markersPredicts.length=0}},{key:"cleanLastPos",value:function(){this.markerLastPos.length=0}},{key:"cleanLastPosOther",value:function(){this.markerLastPosOther.length=0}},{key:"addTrajet",value:function(e){this.trajets.push(e)}},{key:"cleanTrajets",value:function(){this.trajets.length=0}},{key:"addTrajetMatrix",value:function(e){this.trajetMatrix.push(e)}},{key:"cleanTrajetMatrix",value:function(){this.trajetMatrix.length=0}},{key:"addAttentes",value:function(e){var t=this;e.forEach(function(e){t.attentes.push(e)})}},{key:"cleanAttentes",value:function(){this.attentes.length=0}},{key:"cleanProgressBars",value:function(){this.progressBars.length=0}},{key:"addMessage",value:function(e){this.messagesNonlu.push(e)}},{key:"addProgress",value:function(e){this.progressBars.push(e)}}]),e}()},144:function(e,t){"use strict";function n(){}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},145:function(e,t){"use strict";function n(e){e.defaults.useXDomain=!0,delete e.defaults.headers.common["X-Requested-With"]}n.$inject=["$httpProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},146:function(e,t){"use strict";function n(e){e.configure({key:"AIzaSyBOeBriCeuw0BETvQRlKloB4KoooPYzu4g",libraries:"weather,geometry,visualization,places"})}n.$inject=["uiGmapGoogleMapApiProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},147:function(e,t){"use strict";function n(){}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},148:function(e,t){"use strict";function n(e,t,n){n.html5Mode(!1).hashPrefix("!"),t.otherwise("/"),e.state("app",{url:"/",component:"app"})}n.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},149:function(e,t){!function(e){"use strict";function t(){function e(e,o,a){if(o.on("click",function(){var e=document.getElementById(a.printElementId);e&&n(e)}),window.matchMedia){var i=window.matchMedia("print");i.addListener(function(e){e.matches||t()})}window.onafterprint=t}function t(){o.innerHTML=""}function n(e){var t=e.cloneNode(!0);o.innerHTML="",o.appendChild(t),window.print()}var o=document.getElementById("printSection");return o||(o=document.createElement("div"),o.id="printSection",document.body.appendChild(o)),{link:e,restrict:"A"}}var n=e.module("ngPrint",[]);n.directive("ngPrint",[t])}(window.angular)},150:function(e,t,n){var o,o;/*! Raven.js 3.9.2 (5286373) | github.com/getsentry/raven-js */
!function(t){e.exports=t()}(function(){return function e(t,n,a){function i(r,l){if(!n[r]){if(!t[r]){var c="function"==typeof o&&o;if(!l&&c)return o(r,!0);if(s)return s(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[r]={exports:{}};t[r][0].call(d.exports,function(e){var n=t[r][1][e];return i(n?n:e)},d,d.exports,e,t,n,a)}return n[r].exports}for(var s="function"==typeof o&&o,r=0;r<a.length;r++)i(a[r]);return i}({1:[function(e,t,n){"use strict";function o(e,t){function n(){this.$get=["$window",function(t){return e}]}function a(e){e.decorator("$exceptionHandler",["Raven","$delegate",i])}function i(e,t){return function(n,o){e.captureException(n,{extra:{cause:o}}),t(n,o)}}t=t||window.angular,t&&(t.module("ngRaven",[]).provider("Raven",n).config(["$provide",a]),e.setDataCallback(function(e,t){o._normalizeData(e),t&&t(e)}))}var a=/^\[((?:[$a-zA-Z0-9]+:)?(?:[$a-zA-Z0-9]+))\] (.*?)\n?(\S+)$/;o._normalizeData=function(e){var t=e.exception;if(t){t=t.values[0];var n=a.exec(t.value);n&&(t.type=n[1],t.value=n[2],e.message=t.type+": "+t.value,e.extra.angularDocs=n[3].substr(0,250))}},t.exports=o},{}]},{},[1])(1)})},161:function(e,t){e.exports='<div class="progressBar" ng-repeat="progressBar in progressBars | orderBy:\'chauffeur\'" layout-padding layout-align="center center">\n  <h4 ng-style="{color:progressBar.color}">{{progressBar.chauffeur}}</h4>\n    <v-accordion class="vAccordion--default">\n    <v-pane ng-hide="progressBar.livTot == 0">\n      <v-pane-header>\n        <p>Livraisons {{progressBar.liv}} / {{progressBar.livTot}}</p>\n        <md-progress-linear class="liv" md-mode="determinate" value="{{progressBar.livPercent}}"></md-progress-linear>\n      </v-pane-header>\n      <v-pane-content>\n        <div class="progressBar_positions_container" layout="column" layout-align="center">\n            <div ng-repeat="p in progressBar.positionsLivraisons" layout="row" layout-align="none center">\n              <div class="progressBar_ico">\n                <img ng-src="{{p.ico}}" alt="">\n              </div>\n              <div>\n                <p><b>{{p.nom}}</b></p>\n                <p>{{p.codeano}} {{p.num}} {{p.datesuivi}}</p>\n              </div>\n            </div>\n        </div>\n      </v-pane-content>\n    </v-pane>\n    <v-pane ng-hide="progressBar.ramTot == 0">\n      <v-pane-header>\n        <p>Ramasses {{progressBar.ram}} / {{progressBar.ramTot}}</p>\n        <md-progress-linear class="ram" md-mode="determinate" value="{{progressBar.ramPercent}}"></md-progress-linear>\n      </v-pane-header>\n      <v-pane-content>\n        <div class="progressBar_positions_container" layout="column" layout-align="center">\n            <div ng-repeat="p in progressBar.positionsRamasses" layout="row" layout-align="none center">\n              <div class="progressBar_ico">\n                <img ng-src="{{p.ico}}" alt="">\n              </div>\n              <div>\n                <p><b>{{p.nom}}</b></p>\n                <p>{{p.codeano}} {{p.num}} {{p.datesuivi}}</p>\n              </div>\n            </div>\n        </div>\n      </v-pane-content>\n    </v-pane>\n  </v-accordion>\n</div>\n'},162:function(e,t){e.exports='<ui-gmap-google-map center=\'map.center\' control=\'map.control\' zoom=\'map.zoom\' events="map.events" pan=\'true\' refresh="true">\n  <ui-gmap-search-box template="null" events="searchbox.events" class="searchbox"></ui-gmap-search-box>\n  <ui-gmap-layer type="TrafficLayer" show="Trafficshow"></ui-gmap-layer>\n  <ui-gmap-markers models="markerLastPos" idkey="\'id\'" coords="\'coords\'" icon="\'options.icon\'" options="\'options\'" fit=\'true\'></ui-gmap-markers>\n  <ui-gmap-markers models="markerLastPosOther" idkey="\'id\'" coords="\'coords\'" icon="\'options.icon\'" options="\'options\'" type="cluster" doCluster="true" typeOptions="clusterOptionsOther" fit=\'true\' control="{}"></ui-gmap-markers>\n  <ui-gmap-markers models="markers" idkey="\'id\'" coords="\'coords\'" options="\'options\'" icon="\'options.icon\'" events="\'events\'" type="cluster" doCluster="true" typeOptions="clusterOptions" fit=\'true\'></ui-gmap-markers>\n  <ui-gmap-markers models="markersPredicts" coords="\'coords\'" options="\'options\'" icon="\'options.icon\'" events="\'events\'" type="cluster" doCluster="true" typeOptions="clusterPreOptions" fit=\'true\'></ui-gmap-markers>\n  <ui-gmap-markers models="attentes" coords="\'coords\'" type="cluster" doCluster="true" options="\'options\'" fit=\'true\'></ui-gmap-markers>\n  <ui-gmap-polyline ng-repeat="p in Trajets" path="p.path" stroke="p.stroke" clickable="true" draggable="false" editable="false" geodesic="true" icons="p.icons" visible="true" fit="true" events="p.events"></ui-gmap-polyline>\n  <ui-gmap-polyline ng-repeat="p in TrajetMatrix" path="p.path" stroke="p.stroke" clickable="true" draggable="false" editable="false" geodesic="true" icons="p.icons" visible="true" fit="true" events="p.events"></ui-gmap-polyline>\n  <ui-gmap-marker coords="markerPlaces.coords" options="markerPlaces.options" idkey="88"></ui-gmap-marker>\n</ui-gmap-google-map>\n'},163:function(e,t){e.exports='<div class="messagetoolbar" ng-class="messagetoolbarActive ? \'-active\' : \'-disabled\'" layout>\n  <div class="messagetoolbar_new">\n    <md-button class="md-icon-button" aria-label="New" ng-click="newMessage = !newMessage">\n      <md-icon md-svg-icon="images/ico/ico_newmessage.svg"></md-icon>\n    </md-button>\n  </div>\n  <div class="messagetoolbar_newmessage" layout ng-class="newMessage ? \'-active\' : \'-disabled\'">\n    <md-input-container class="messagetoolbar_newmessage_select_chauffeurs" flex="20">\n      <label>Chauffeurs</label>\n      <md-select ng-model="selectedChauffeurs" md-on-close="clearSearchTerm()" data-md-container-class="selectHeader" multiple>\n        <md-select-header class="select-header">\n          <input ng-model="searchTerm" type="search" placeholder="Choisissez de(s) chauffeur(s)" class="header-searchbox md-text">\n        </md-select-header>\n        <md-optgroup label="chauffeur">\n          <md-option ng-value="chauffeur" ng-repeat="chauffeur in chauffeurs | filter:searchTerm">{{chauffeur.SALNOM}}</md-option>\n        </md-optgroup>\n      </md-select>\n    </md-input-container>\n    <div class="messagetoolbar_buttun_cancel">\n      <md-button class="md-icon-button md-accent" aria-label="Cancel" ng-show="selectedChauffeurs.length > 0" ng-click="cancelSelected()">\n        <md-icon md-svg-icon="images/ico/ico_cancel.svg"></md-icon>\n      </md-button>\n    </div>\n    <md-input-container class="messagetoolbar_newmessage_input md-block" flex>\n      <label>Message</label>\n      <input required name="message" ng-model="Textmessage">\n    </md-input-container>\n    <div class="messagetoolbar_newmessage_sendbutton">\n      <md-button class="md-icon-button" aria-label="Send" ng-click="sendMessage(selectedChauffeurs, Textmessage)">\n        <md-icon md-svg-icon="images/ico/ico_send.svg"></md-icon>\n      </md-button>\n    </div>\n  </div>\n  <div class="messagetoolbar_archive" ng-click="modalArchive = !modalArchive;loadMessagesArchive()">\n    <md-button class="md-icon-button" aria-label="Archive">\n      <md-icon md-svg-icon="images/ico/ico_archive.svg"></md-icon>\n    </md-button>\n  </div>\n  <md-button class="messagetoolbar_inputmessage_sendbutton md-secondary md-icon-button" ng-class="messagetoolbarInputmessageActive ? \'-active\' : \'-disabled\'" aria-label="Send">\n    <md-icon md-svg-icon="images/ico/ico_send.svg"></md-icon>\n  </md-button>\n  <md-list-item class="md-2-line item" ng-repeat="m in messageNonlu | orderBy:\'id\' | limitTo:1 | filter:{isLu:false}">\n    <div class="messagetoolbar_messagecontent md-list-item-text" ng-class="messagetoolbarInputmessageActive ? \'-disabled\' : \'-active\'" layout="column">\n      <p>{{m.text}}</p>\n      <p>{{m.chauffeur}}\n        {{m.datereception}}</p>\n    </div>\n    <md-input-container class="messagetoolbar_inputmessage md-block" ng-class="messagetoolbarInputmessageActive ? \'-active\' : \'-disabled\'">\n      <label>Message</label>\n      <input required name="forminput[m.id]" ng-model="forminput[m.id]">\n      <div ng-messages="forminput[m.id].$error">\n        <div ng-message="required">Champ obligatoire.</div>\n      </div>\n    </md-input-container>\n    <md-button\n      ng-show="forminput[m.id] != undefined"\n      class="messagetoolbar_inputmessage_sendbutton md-secondary md-icon-button"\n      ng-click="sendMessageReply(m.chauffeur, forminput[m.id]);messagetoolbarInputmessageActive = !messagetoolbarInputmessageActive"\n      ng-class="messagetoolbarInputmessageActive ? \'-active\' : \'-disabled\'"\n      aria-label="SendReply">\n      <md-icon md-svg-icon="images/ico/ico_send.svg"></md-icon>\n    </md-button>\n    <md-button class="md-secondary md-icon-button" ng-click="messagetoolbarInputmessageActive = !messagetoolbarInputmessageActive" aria-label="Reply">\n      <md-icon md-svg-icon="images/ico/ico_reply.svg"></md-icon>\n    </md-button>\n    <md-button class="md-secondary md-icon-button" aria-label="lu" ng-click="markAsRead(m.id)">\n      <md-icon md-svg-icon="images/ico/ico_checked.svg"></md-icon>\n    </md-button>\n  </md-list-item>\n  <p flex class="noMSg" ng-hide="messageNonlu.length > 0">Pas de nouveau message</p>\n</div>\n<md-button class="fab_message md-fab md-primary" aria-label="Message" ng-click="messagetoolbarActive = !messagetoolbarActive" ng-class="messagetoolbarActive ? \'-active\' : \'-disabled\'">\n  <md-icon md-svg-src="images/ico/ico_message.svg"></md-icon>\n  <span ng-show="messageNonlu.length > 0">{{messageNonlu.length}}</span>\n</md-button>\n<div class="modalarchive_container" ng-class="modalArchive ? \'-active\' : \'-disabled\'">\n  <md-button class="md-icon-button modalarchive_close" aria-label="New" ng-click="modalArchive = !modalArchive">\n    <md-icon md-svg-icon="images/ico/ico_close.svg"></md-icon>\n  </md-button>\n  <div class="modalarchive_content_container">\n    <md-tabs md-dynamic-height md-center-tabs>\n      <md-tab label="Reçus">\n        <div class="archive_toolbar" layout layout-align="center center">\n          <md-input-container class="archive_toolbar_select_chauffeurs" flex="none">\n            <label>Chauffeur</label>\n            <md-select ng-model="selectedChauffeursRecu" md-on-close="clearSearchTerm()" data-md-container-class="selectHeader">\n              <md-select-header class="select-header">\n                <input ng-model="searchTerm" type="search" placeholder="Choisissez le chauffeur" class="header-searchbox md-text">\n              </md-select-header>\n              <md-optgroup label="chauffeur">\n                <md-option>\n                  <em>Tous</em>\n                </md-option>\n                <md-option ng-value="chauffeur" ng-repeat="chauffeur in chauffeurs |\n                  filter:searchTerm">{{chauffeur.SALNOM}}</md-option>\n              </md-optgroup>\n            </md-select>\n          </md-input-container>\n        </div>\n        <md-list class="md-dense" flex cg-busy="{promise:messageArchiveEmisPromise,message:Chargement,template: require(\'./loading.html\')}">\n          <md-list-item class="modalarchive_archiveMessage" ng-repeat="m in messageArchiveRecu">\n            <div class="md-list-item-text">\n              <h3>{{m.chauffeur}}\n                {{m.datereception}}</h3>\n              <p>{{m.text}}</p>\n            </div>\n          </md-list-item>\n        </md-list>\n      </md-tab>\n      <md-tab label="Emis">\n        <div class="archive_toolbar" layout layout-align="space-around center">\n          <md-input-container class="archive_toolbar_select_chauffeurs" flex="none">\n            <label>Chauffeur</label>\n            <md-select ng-model="selectedChauffeursEmis" md-on-close="clearSearchTerm()" data-md-container-class="selectHeader">\n              <md-select-header class="select-header">\n                <input ng-model="searchTerm" type="search" placeholder="Choisissez le chauffeur" class="header-searchbox md-text">\n              </md-select-header>\n              <md-optgroup label="chauffeur">\n                <md-option>\n                  <em>Tous</em>\n                </md-option>\n                <md-option ng-value="chauffeur" ng-repeat="chauffeur in chauffeurs |\n                  filter:searchTerm">{{chauffeur.SALNOM}}</md-option>\n              </md-optgroup>\n            </md-select>\n          </md-input-container>\n          <md-switch class="switch_auto" ng-model="switch_nonlu" aria-label="Switch auto non lu" ng-change="filterNonlu(switch_nonlu)">\n            <span ng-hide="switch_reloadAuto">Uniquement Non lu</span>\n          </md-switch>\n        </div>\n        <md-list class="md-dense" flex cg-busy="{promise:messageArchivePromise,message:Chargement,template: require(\'./loading.html\')}">\n          <md-list-item class="modalarchive_archiveMessage" ng-repeat="m in messageArchiveEmis">\n            <div class="md-list-item-text">\n              <h3>{{m.chauffeur}}\n                {{m.datereception}}</h3>\n              <p>{{m.text}}</p>\n            </div>\n          </md-list-item>\n        </md-list>\n      </md-tab>\n    </md-tabs>\n  </div>\n</div>\n'},164:function(e,t){e.exports='<md-menu>\n  <md-button aria-label="Open menu" class="md-icon-button main" ng-click="openMenu($mdOpenMenu, $event)">\n    <md-icon md-svg-icon="images/ico/ico_dms.svg"></md-icon>\n  </md-button>\n  <md-menu-content width="4">\n    <md-menu-item>\n      <p>\n        DMSCARTO© v1.1.0\n      </p>\n    </md-menu-item>\n    <md-menu-divider></md-menu-divider>\n    <md-menu-item>\n      <md-button ng-disabled="true">\n        <md-icon md-svg-icon="images/ico/idea.svg" md-menu-align-target></md-icon>\n        Une suggestion ? (soon)\n      </md-button>\n    </md-menu-item>\n    <md-menu-item>\n      <md-button ng-click="reportDialog()">\n        <md-icon md-svg-icon="images/ico/bug.svg" md-menu-align-target></md-icon>\n        Signaler un bug\n      </md-button>\n    </md-menu-item>\n  </md-menu-content>\n</md-menu>\n<md-input-container class="toolbar_select_chauffeurs" flex="none">\n  <label>Chauffeurs</label>\n  <md-select ng-model="selectedChauffeurs" md-on-close="clearSearchTerm()" data-md-container-class="selectHeader" multiple>\n    <md-select-header class="select-header">\n      <input ng-model="searchTerm" type="search" placeholder="Choisissez de(s) chauffeur(s)" class="header-searchbox md-text">\n    </md-select-header>\n    <md-optgroup label="chauffeur">\n      <md-option ng-value="chauffeur" ng-repeat="chauffeur in chauffeurs |\n        filter:searchTerm">{{chauffeur.SALNOM}}</md-option>\n    </md-optgroup>\n  </md-select>\n</md-input-container>\n<md-button class="toolbar_button_cancelSelect md-icon-button md-accent" aria-label="Cancel" ng-click="allSelected()">\n  <md-icon md-svg-icon="images/ico/ico_list.svg"></md-icon>\n</md-button>\n<md-button class="toolbar_button_cancelSelect md-icon-button md-accent" aria-label="Cancel" ng-show="selectedChauffeurs.length > 0" ng-click="cancelSelected()">\n  <md-icon md-svg-icon="images/ico/ico_cancel.svg"></md-icon>\n</md-button>\n<div class="toolbar_checkbox" layout="column" layout-gt-sm="row" layout-align="none" flex="none">\n  <div>\n    <div class="toolbar_checkbox_livraisons">\n      <md-checkbox class="md-primary" ng-model="cbLivraison" aria-label="Livraisons" ng-change="getPositions(selectedChauffeurs,cbLivraison,dateCalendar,\'liv\')" ng-disabled="!(selectedChauffeurs.length > 0)">\n        Livraisons\n      </md-checkbox>\n    </div>\n    <div class="toolbar_checkbox_ramasses" flex>\n      <md-checkbox class="md-primary" ng-model="cbRamasses" aria-label="Ramasses" ng-change="getPositions(selectedChauffeurs,cbRamasses,dateCalendar, \'ram\')" ng-disabled="!(selectedChauffeurs.length > 0)">\n        Ramasses\n      </md-checkbox>\n    </div>\n    <div class="toolbar_checkbox_predict" flex>\n      <md-checkbox class="md-primary" ng-model="cbPredict" aria-label="Prédictions" ng-disabled="!(selectedChauffeurs.length > 0)" ng-change="getPredicts(selectedChauffeurs,cbPredict)">\n        Prédictions\n      </md-checkbox>\n    </div>\n  </div>\n  <div>\n    <div class="toolbar_checkbox_trajet" flex>\n      <md-checkbox class="md-primary" ng-model="cbTrajet" aria-label="Trajet" ng-change="getTrajets(selectedChauffeurs,cbTrajet,dateCalendar)" ng-disabled="!(selectedChauffeurs.length > 0)">\n        Trajets\n      </md-checkbox>\n    </div>\n    <div class="toolbar_checkbox_attentes" flex>\n      <md-checkbox class="md-primary" ng-model="cbAttentes" aria-label="Attentes" ng-change="getAttentes(selectedChauffeurs,cbAttentes,dateCalendar)" ng-disabled="!(selectedChauffeurs.length > 0)">\n        Attentes\n      </md-checkbox>\n    </div>\n    <div class="toolbar_checkbox_chauffeurs" flex>\n      <md-checkbox class="md-primary" ng-model="cbChauffeurs" aria-label="Chauffeurs" ng-change="getGpsChauffeurs(cbChauffeurs)">\n        Autres chauffeurs\n      </md-checkbox>\n    </div>\n  </div>\n</div>\n<md-datepicker flex="20" ng-model="dateCalendar" md-placeholder="Enter date"></md-datepicker>\n<div flex class="toolbar_button" layout="column" layout-gt-lg="row" layout-align="center center">\n  <div>\n    <md-button class="md-icon-button md-raised" ng-disabled="selectedChauffeurs == null" aria-label="recadre" ng-click="fitBounds()">\n      <md-icon md-svg-icon="images/ico/ico_fullscreen.svg"></md-icon>\n      <md-tooltip md-direction="bottom">\n        Recentrer la carte\n      </md-tooltip>\n    </md-button>\n    <md-button class="md-icon-button md-raised" ng-disabled="selectedChauffeurs == null" aria-label="refresh" ng-click="refresh()">\n      <md-icon md-svg-icon="images/ico/ico_refresh.svg"></md-icon>\n      <md-tooltip md-direction="bottom">\n        Recharger la carte\n      </md-tooltip>\n    </md-button>\n    <md-button class="md-icon-button md-raised toolbar_button_sound" aria-label="sound" ng-click="muteSound()">\n      <img ng-src="{{urlSound}}" alt="Bookmark">\n      <md-tooltip md-direction="bottom">\n        Désactiver le son\n      </md-tooltip>\n    </md-button>\n    <md-button class="md-icon-button md-raised md-warn" ng-click="modalaide = !modalaide" ng-disabled="true">\n      <md-icon md-svg-icon="images/ico/info.svg"></md-icon>\n      <md-tooltip md-direction="bottom">\n        Aide\n      </md-tooltip>\n    </md-button>\n  </div>\n  <div flex layout="column" layout-align="center center" class="toolbar_switch">\n    <md-switch class="switch_auto" ng-model="switch_reloadAuto" aria-label="Switch auto 1" ng-change="reloadAuto(switch_reloadAuto)">\n      <span ng-hide="switch_reloadAuto">Rafraîchissement auto</span>\n      <md-progress-linear ng-show="switch_reloadAuto" class="progress_reload" md-mode="determinate" value="{{progressReload}}"></md-progress-linear>\n    </md-switch>\n  </div>\n  <md-input-container ng-show="adminMode">\n    <label>Cookie ID</label>\n    <md-select ng-model="societeId" ng-change="setCookie(societeId);">\n      <md-option ng-repeat="item in cookiesSoc" ng-value="item.socId">\n        {{item.socName}}\n      </md-option>\n    </md-select>\n  </md-input-container>\n</div>\n<div class="modalaide_container" ng-class="modalaide ? \'-active\' : \'-disabled\'">\n  <md-button class="md-icon-button modalaide_close" aria-label="New" ng-click="modalaide = !modalaide">\n    <md-icon md-svg-icon="images/ico/ico_close.svg"></md-icon>\n  </md-button>\n  <div class="modalaide_content_container" layout="row"></div>\n</div>\n'},165:function(e,t){e.exports='<div id="printThis"  class="main_wrapper" layout="row" layout-padding>\n  <section layout="column" flex="80" ddnKonami>\n    <toolbar class="toolbar" flex="none" layout="row" layout-align="space-between center"></toolbar>\n    <mapContainer cg-busy="{promise:Promise[0],message:Promise[0].message,template: require(\'./loading.html\')}" class="mapContainer"><div class="modifyMe">old</div></mapContainer>\n  </section>\n  <aside flex>\n    <asideContainer layout="column"></asideContainer>\n  </aside>\n</div>\n<messageToolbar></messageToolbar>\n'},169:function(e,t,n){/**
* please-wait
* Display a nice loading screen while your app loads

* @author Pathgather <tech@pathgather.com>
* @copyright Pathgather 2015
* @license MIT <http://opensource.org/licenses/mit-license.php>
* @link https://github.com/Pathgather/please-wait
* @module please-wait
* @version 0.0.5
*/
!function(e,n){n(t)}(this,function(e){var t,n,o,a,i,s,r,l,c,u,d,m,g,f,h,p;s=document.createElement("fakeelement"),a=!1,g=!1,o="animationend",m=null,i="Webkit Moz O ms".split(" "),d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};for(r in d)if(f=d[r],null!=s.style[r]){m=f,g=!0;break}if(null!=s.style.animationName&&(a=!0),!a)for(h=0,p=i.length;h<p;h++)if(l=i[h],null!=s.style[""+l+"AnimationName"]){switch(l){case"Webkit":o="webkitAnimationEnd";break;case"Moz":o="animationend";break;case"O":o="oanimationend";break;case"ms":o="MSAnimationEnd"}a=!0;break}return n=function(e,t){return t.classList?t.classList.add(e):t.className+=" "+e},u=function(e,t){return t.classList?t.classList.remove(e):t.className=t.className.replace(e,"").trim()},t=function(){function e(e){var t,i,s,r;t=this.constructor._defaultOptions,this.options={},this.loaded=!1,this.finishing=!1;for(i in t)r=t[i],this.options[i]=null!=e[i]?e[i]:r;this._loadingElem=document.createElement("div"),this._loadingHtmlToDisplay=[],this._loadingElem.className="pg-loading-screen",null!=this.options.backgroundColor&&(this._loadingElem.style.backgroundColor=this.options.backgroundColor),this._loadingElem.innerHTML=this.options.template,this._loadingHtmlElem=this._loadingElem.getElementsByClassName("pg-loading-html")[0],null!=this._loadingHtmlElem&&(this._loadingHtmlElem.innerHTML=this.options.loadingHtml),this._readyToShowLoadingHtml=!1,this._logoElem=this._loadingElem.getElementsByClassName("pg-loading-logo")[0],null!=this._logoElem&&(this._logoElem.src=this.options.logo),u("pg-loaded",document.body),n("pg-loading",document.body),document.body.appendChild(this._loadingElem),n("pg-loading",this._loadingElem),this._onLoadedCallback=this.options.onLoadedCallback,s=function(e){return function(t){if(e.loaded=!0,e._readyToShowLoadingHtml=!0,n("pg-loaded",e._loadingHtmlElem),a&&e._loadingHtmlElem.removeEventListener(o,s),e._loadingHtmlToDisplay.length>0&&e._changeLoadingHtml(),e.finishing)return null!=t&&t.stopPropagation(),e._finish()}}(this),null!=this._loadingHtmlElem&&(a?this._loadingHtmlElem.addEventListener(o,s):s(),this._loadingHtmlListener=function(e){return function(){if(e._readyToShowLoadingHtml=!0,u("pg-loading",e._loadingHtmlElem),g&&e._loadingHtmlElem.removeEventListener(m,e._loadingHtmlListener),e._loadingHtmlToDisplay.length>0)return e._changeLoadingHtml()}}(this),this._removingHtmlListener=function(e){return function(){return e._loadingHtmlElem.innerHTML=e._loadingHtmlToDisplay.shift(),u("pg-removing",e._loadingHtmlElem),n("pg-loading",e._loadingHtmlElem),g?(e._loadingHtmlElem.removeEventListener(m,e._removingHtmlListener),e._loadingHtmlElem.addEventListener(m,e._loadingHtmlListener)):e._loadingHtmlListener()}}(this))}return e._defaultOptions={backgroundColor:null,logo:null,loadingHtml:null,template:"<div class='pg-loading-inner'>\n  <div class='pg-loading-center-outer'>\n    <div class='pg-loading-center-middle'>\n      <h1 class='pg-loading-logo-header'>\n        <img class='pg-loading-logo'></img>\n      </h1>\n      <div class='pg-loading-html'>\n      </div>\n    </div>\n  </div>\n</div>",onLoadedCallback:null},e.prototype.finish=function(e,t){if(null==e&&(e=!1),window.document.hidden&&(e=!0),this.finishing=!0,null!=t&&this.updateOption("onLoadedCallback",t),this.loaded||e)return this._finish(e)},e.prototype.updateOption=function(e,t){switch(e){case"backgroundColor":return this._loadingElem.style.backgroundColor=t;case"logo":return this._logoElem.src=t;case"loadingHtml":return this.updateLoadingHtml(t);case"onLoadedCallback":return this._onLoadedCallback=t;default:throw new Error("Unknown option '"+e+"'")}},e.prototype.updateOptions=function(e){var t,n,o;null==e&&(e={}),o=[];for(t in e)n=e[t],o.push(this.updateOption(t,n));return o},e.prototype.updateLoadingHtml=function(e,t){if(null==t&&(t=!1),null==this._loadingHtmlElem)throw new Error("The loading template does not have an element of class 'pg-loading-html'");if(t?(this._loadingHtmlToDisplay=[e],this._readyToShowLoadingHtml=!0):this._loadingHtmlToDisplay.push(e),this._readyToShowLoadingHtml)return this._changeLoadingHtml()},e.prototype._changeLoadingHtml=function(){return this._readyToShowLoadingHtml=!1,this._loadingHtmlElem.removeEventListener(m,this._loadingHtmlListener),this._loadingHtmlElem.removeEventListener(m,this._removingHtmlListener),u("pg-loading",this._loadingHtmlElem),u("pg-removing",this._loadingHtmlElem),g?(n("pg-removing",this._loadingHtmlElem),this._loadingHtmlElem.addEventListener(m,this._removingHtmlListener)):this._removingHtmlListener()},e.prototype._finish=function(e){var t;if(null==e&&(e=!1),null!=this._loadingElem)return n("pg-loaded",document.body),"function"==typeof this._onLoadedCallback&&this._onLoadedCallback.apply(this),t=function(e){return function(){return document.body.removeChild(e._loadingElem),u("pg-loading",document.body),a&&e._loadingElem.removeEventListener(o,t),e._loadingElem=null}}(this),!e&&a?(n("pg-loaded",this._loadingElem),this._loadingElem.addEventListener(o,t)):t()},e}(),c=function(e){return null==e&&(e={}),new t(e)},e.pleaseWait=c,c})},176:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.app=void 0;var a=n(1),i=o(a),s=n(4),r=o(s),l=n(150),c=o(l);n(13),n(6),n(3),n(11),n(7),n(10),n(14),n(8),n(126),n(149),n(2),n(9),n(12);var u=n(148),d=o(u),m=n(146),g=o(m),f=n(147),h=o(f),p=n(144),v=o(p),b=n(145),y=o(b),A=n(135),k=n(134),E=n(133),C=n(132),_=n(131),P=n(142),M=n(143),O=n(138),T=n(141),w=n(137),S=n(140),L=n(139),x=n(136);n(130),n(129),n(127),n(128);var D=t.app="app";i["default"].module(D,["ui.router","ngMaterial","ngAnimate","ngMessages","ngCookies","ngAudio","ngRaven","angular.filter","cgBusy","vAccordion","uiGmapgoogle-maps"]).config(d["default"]).config(v["default"]).config(h["default"]).config(g["default"]).config(y["default"]).service("VariablesShare",M.VariablesShare).component("app",A.App).component("toolbar",k.toolBar).component("messagetoolbar",E.messageToolbar).component("mapcontainer",C.mapContainer).component("asidecontainer",_.asideContainer).service("api",P.Api).service("getPositionsFun",O.getPositionsFun).service("getTrajetsFun",T.getTrajetsFun).service("getAttentesFun",w.getAttentesFun).service("getProgressFun",S.getProgressFun).service("getPredictFun",L.getPredictFun).service("diversFun",x.diversFun),r["default"].config("https://3210a38ae30c4a92b111ef6e6356460c@sentry.io/128043",{release:"0e4fdef81448dcfa0e16ecc4433ff3997aa53572"}).addPlugin(c["default"]).install()}},[176]);